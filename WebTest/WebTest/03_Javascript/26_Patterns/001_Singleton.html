<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Единственный объект (Singleton)</title>
</head>
<body>
    <script>
        /*
        Суть шаблона состоит в том, чтобы обеспечить возможность создания
        только одного экземпляра единственного класса.
        Это означает что при попытке создать второй экземпляр вызывающий код
        будет получать первый экземпляр созданные ранее.

        Так как в JavaScript нет классов,
        то новый объект уже является единственным в приложении.
        При создании объекта с использованием литерала, создается единственный объект
        и для этого не требуется использовать какие-либо дополнительные конструкции.
        */

        var obj1 = {
            name: 'test1'
        };

        var obj2 = {
            name: 'test1'
        };

        console.log(obj1 === obj2); // false
        console.log(obj1 == obj2); // false

        //Реализация через функцию конструктор
        function Sun() {

            // проверяем наличие экземпляра созданного ранее.
            if (typeof Sun.instance === "object") {
                return Sun.instance;
            }

            // создаем новый экземпляр
            this.color = "yellow";
            this.isBig = true;

            // cохраняем созданный экземпляр для повторного использования.
            Sun.instance = this;

            // неявный возврат экземпляра
            //return this;
        }

        var sun1 = new Sun();
        //Sun.instance = null;
        var sun2 = new Sun();
        console.log(sun1 === sun2); // true

    </script>
</body>
</html>

