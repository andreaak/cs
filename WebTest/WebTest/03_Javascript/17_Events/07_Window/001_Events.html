<!--
    События окна:
    onload - происходит при окончании загрузки страницы
    onunload - происходит перед тем как объект будет выгружен (переход на другое окно или закрытие)
-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>События клавиатуры</title>
    <script src="~/03_Javascript/17_Events/03_IE_Events/002_CrossBrowserEventUtil.js"></script>
    <script>
        window.onload = function () {
            //
        }

        var isSupported = document.implementation.hasFeature("HTMLEvents", "2.0");
        var isSupported = document.implementation.hasFeature("UIEvent", "3.0");

        EventUtil.addHandler(window,
            "load",
            function (event) {
                alert("Loaded!");
            });

        var image = document.getElementById("myImage");
        EventUtil.addHandler(image,
            "load",
            function (event) {
                event = EventUtil.getEvent(event);
                alert(EventUtil.getTarget(event).src);
            });

        EventUtil.addHandler(window,
            "load",
            function () {
                var image = document.createElement("img");
                EventUtil.addHandler(image,
                    "load",
                    function (event) {
                        event = EventUtil.getEvent(event);
                        alert(EventUtil.getTarget(event).src);
                    });
                document.body.appendChild(image);
                image.src = "smile.gif";
            });

        EventUtil.addHandler(window,
            "load",
            function () {
                var image = new Image();
                EventUtil.addHandler(image,
                    "load",
                    function (event) {
                        alert("Imageloaded!");
                    });
                image.src = "smile.gif";
            });

        EventUtil.addHandler(window,
            "load",
            function () {

                var script = document.createElement("script");
                script.type = "text/javascript";
                EventUtil.addHandler(script,
                    "load",
                    function (event) {
                        alert("Loaded");
                    });
                script.src = "example.js";
                document.body.appendChild(script);
            });

        EventUtil.addHandler(window,
            "load",
            function () {
                var link = document.createElement("link");
                link.type = "text/css";
                link.rel = "stylesheet";
                EventUtil.addHandler(link,
                    "load",
                    function (event) {
                        alert("css loaded");
                    });
                link.href = "example.css";
                document.getElementsByTagName("head")[0].appendChild(link);
            });

        EventUtil.addHandler(window, "unload", function (event) {
            alert("Unloaded!");
        });

        EventUtil.addHandler(window, "resize", function (event) {
            alert("Resized");
        });

        EventUtil.addHandler(window, "scroll", function (event) {
            if (document.compatMode == "CSS1Compat") {
                alert(document.documentElement.scrollTop);
            } else {
                alert(document.body.scrollTop);
            }
        });

    </script>
</head>
<body>

</body>
</html>
