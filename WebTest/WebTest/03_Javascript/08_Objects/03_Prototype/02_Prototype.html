<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<!--

    prototype - системное свойство присущее каждому объекту.

    Как правило, свойство prototype используется для предоставления
    базового набора функциональных возможностей классу объектов.
    Новые экземпляры объекта "наследуют" поведение прототипа,
    присвоенного этому объекту.

    Также методы прототипа будут доступны каждому экземпляру,
    но храниться будут только в прототипе
    и соответственно занимать меньше места чем
    если бы метод принадлежал каждому экземпляру.

    При вызове функции объекта obj.func()
    интерпретатор сначала ищет функцию в определении объекта,
    а потом в prototype

-->
<head>
    <title>Прототип</title>

    <script type="text/javascript">

        function Rectangle(w, h) {
            // свойства
            this.width = w;
            this.height = h;
            /* 
            Создавая метод в объекте бессмысленно расходуется память, 
            так как каждый новый объект созданный этой функцией-конструктором 
            будет содержать в себе копию метода.
            */
            //this.getArea = function () {
            //    return this.width * this.height;
            //}
        }

        /*
        Метод прототипа Rectangle будет доступен каждому экземпляру,
        но храниться будет в прототипе соответственно занимать меньше места
        чем если бы метод принадлежал каждому экземпляру.
        */
        Rectangle.prototype.getArea = function () {
            return this.width * this.height;
        }

        // Свойство прототипа, будет доступно всем экземплярам
        Rectangle.prototype.name = "RECTANGLE";

        var rect = new Rectangle(100, 50);
        var rect2 = new Rectangle(200, 50);

        document.write(rect.getArea() + "<br/>");//5000
        document.write(rect.name + "<br />");//

        document.write(rect2.getArea() + "<br/>");//10000
        document.write(rect2.name + "<br />");//RECTANGLE
        /*
        При попытке смены значения, которое было унаследовано от прототипа,
        в объекте будет создана копия свойства (свойство прототипа не изменится).
        Значение в прототипе может быть измененно
        только через операцию Rectangle.prototype.name
        */
        rect.name = "first rectangle";
        document.write(rect.name + "<br />");//first rectangle
        document.write(rect2.name + "<br />");//RECTANGLE

        Rectangle.prototype.name = "first rectangle";
        document.write(rect.name + "<br />");//first rectangle
        document.write(rect2.name + "<br />");//first rectangle

    </script>

</head>
<body>
</body>
</html>
