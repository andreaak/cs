<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Свойства и методы</title>

    <script type="text/javascript">
        function Point(x, y) {

            // свойства экземпляра
            this.x = x;
            this.y = y;

            // закрытое поле
            var temp = 578;

            // метод экземпляра
            this.print = function () {
                document.write("(" + this.x + ", " + this.y + ")<br />");
            }

            // закрытый метод
            var privateMethod = function () {
                document.write("Private method this point: (" + this.x + ", " + this.y + ")<br />");
                document.write("Private method point: (" + x + ", " + y + ")<br />");
                document.write("Temp: " + temp + "<br />");
            };

            this.testPrivateMethod = function () {
                privateMethod();
            }

            this.setMethod = function (val) {
                temp = val;
            }
        }

        // свойство функции конструктора (аналог статических свойств).
        Point.MaxPointCount = 100;

        // Метод функции-конструктора (аналог статического метода).
        Point.getOrigin = function () {
            return new Point(0, 0); // this использовать недопустимо.
        }

        // создание экземпляров и работа с свойствами и методами экземпляров.
        var p1 = new Point(100, 200);
        p1.x = 300;
        p1.y = 400;
        document.write("First point: ");
        p1.print();

        //document.write("Private method call: ");
        //p1.privateMethod();//Uncaught TypeError: p1.privateMethod is not a function
        //document.write(p1.temp());//Uncaught TypeError: p1.temp is not a function

        document.write("Test Private method call<br/>");
        p1.testPrivateMethod();
        p1.setMethod(444);
        p1.testPrivateMethod();

        /*
        First point: (300, 400)
        Test Private method call
        Private method this point: (undefined, undefined)
        Private method point: (100, 200)
        Temp: 578
        Private method this point: (undefined, undefined)
        Private method point: (100, 200)
        Temp: 444
        */

        document.write("Second point: ");
        var p2 = new Point(1000, 2000);
        p2.print();

        // работа с свойством и методом функции-конструктора.
        Point.MaxPointCount = 10;
        document.write("getOrigin point: ");
        Point.getOrigin().print();

        p1.someField = 500;
        document.write("p1.someField: " + p1.someField + "<br />");

        //ошибка p1.getOrigin is not a function
        //document.write(p1.getOrigin() + "<br />");
        document.write(p1.MaxPointCount + "<br />");//undefined
        document.write(p1.DDD + "<br />");//undefined

        /*
        Second point: (1000, 2000)
        getOrigin point: (0, 0)
        p1.someField: 500
        undefined
        undefined
        */
    </script>

</head>
<body>
</body>
</html>