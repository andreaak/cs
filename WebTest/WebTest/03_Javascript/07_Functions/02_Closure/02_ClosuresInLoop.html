<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Замыкание или closures</title>
</head>
<body>
    <script>
        function createFunctionsBad() {
            var result = new Array();
            for (var i = 0; i < 10; i++) {
                result[i] = function () {
                    return i;
                };
            }
            return result;
        }

        var res = createFunctionsBad();
        document.writeln(res[2]() + "<br/>");//10

        function createFunctionsES6() {
            var result = new Array();
            for (let j = 0; j < 10; j++) {
                result[j] = function () {
                    return j;
                };
            }
            return result;
        }

        var res = createFunctionsES6();
        document.writeln(res[2]() + "<br/>");//2

        function createFunctions() {
            var result = new Array();
            for (var i = 0; i < 10; i++) {
                result[i] = function (num) {
                    return function () {
                        return num;
                    };
                }(i);
            }
            return result;
        }

        var res = createFunctions();
        document.writeln(res[2]() + "<br/>");//2


        var a = [1, 2, 3, 4, 5];
        for (var i = 0; i < a.length; i++) {

            a[i] = createfunc(i);
        }
        document.writeln(a[2]() + "<br/>");

        function createfunc(i) {
            return function () {
                return i;
            };
        }
    </script>
</body>
</html>
